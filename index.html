<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Аналитическая система</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="icon" type="image/svg+xml" href="./favicon.svg">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Верхняя панель -->
    <header class="top-panel">
        <div class="logo-container">
            <div class="logo-square"></div>
            <h1 class="app-title">Аналитическая система</h1>
        </div>
        <nav class="top-menu">
            <ul>
                <li><a href="#">О системе</a></li>
                <li><a href="#">Справка</a></li>
                <li><a href="#">Контакты</a></li>
            </ul>
        </nav>
    </header>

    <div class="main-container">
        <!-- Боковая панель -->
        <aside class="sidebar">
            <nav class="main-nav">
                <ul>
                    <li class="active">
                        <a href="/">
                            <span class="nav-icon home-icon"></span>
                            Главная
                        </a>
                    </li>
                    <li>
                        <a href="/data">
                            <span class="nav-icon data-icon"></span>
                            Данные
                        </a>
                    </li>
                    <li>
                        <a href="/analysis">
                            <span class="nav-icon analysis-icon"></span>
                            Анализ
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <span class="nav-icon forecast-icon"></span>
                            Прогнозы
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <span class="nav-icon reports-icon"></span>
                            Отчеты
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <span class="nav-icon help-icon"></span>
                            Справка
                        </a>
                    </li>
                </ul>
            </nav>
            <div class="version-info">
                <p>Версия 3.2.1</p>
                <p>Обновлено 28.03.2025</p>
            </div>
        </aside>

        <!-- Основной контент -->
        <main class="content">
            <div class="breadcrumbs">
                <span>Главная</span>
            </div>

            <div class="page-header">
                <h2>Новости и события</h2>
                <p class="subtitle">Актуальная информация и события в мире финансов и экономики</p>
            </div>

            <div class="news-container">
                
                
                <div id="news-list">
                    <!-- Новости будут загружены с помощью JavaScript -->
                    <div class="loading-indicator">Загрузка новостей...</div>
                </div>
                
                <div class="update-info">
                    <div class="update-date">
                        <span class="date-badge">22.03.2025</span>
                    </div>
                    <h3>Выпущено обновление аналитической системы</h3>
                    <span class="version-badge">v3.2.1</span>
                </div>
            </div>
        </div>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // URL вашего прокси-сервера (замените на ваш домен на PythonAnywhere)
            const proxyUrl = 'http://37.252.23.30:8000/api/news';
            
            // Параметры запроса (можно изменить поисковый запрос, если нужно)
            const queryParams = new URLSearchParams({
                q: 'Банки ЦБ',  // Поисковый запрос
                limit: 5     // Максимальное количество новостей
            });
            
            // Полный URL с параметрами
            const fullUrl = `${proxyUrl}?${queryParams}`;
            
            // Элемент для отображения новостей
            const newsList = document.getElementById('news-list');
            newsList.innerHTML = '<div class="loading-indicator">Загрузка новостей...</div>';
            
            // Выполняем запрос к прокси-серверу
            fetch(fullUrl)
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`HTTP error! Status: ${response.status}`);
                    }
                    return response.json();
                })
                .then(newsData => {
                    // Очищаем контейнер новостей
                    newsList.innerHTML = '';
                    
                    if (newsData && newsData.length > 0) {
                        // Отображаем каждую новость
                        newsData.forEach(news => {
                            // Форматируем дату публикации
                            const publishDate = new Date(news.publishedAt);
                            const formattedDate = `${publishDate.getDate().toString().padStart(2, '0')}.${(publishDate.getMonth() + 1).toString().padStart(2, '0')}.${publishDate.getFullYear()}`;
                            
                            // Создаем элемент новости
                            const newsItem = document.createElement('div');
                            newsItem.className = 'news-item';
                            
                            newsItem.innerHTML = `
                                <div class="news-date">
                                    <span class="date-badge">${formattedDate}</span>
                                </div>
                                <h3>${news.title}</h3>
                                <p>${news.description || 'Описание отсутствует'}</p>
                                <div class="news-footer">
                                    <a href="${news.url}" class="more-link" target="_blank">Подробнее →</a>
                                    <span class="source">Источник: ${news.source}</span>
                                </div>
                            `;
                            
                            newsList.appendChild(newsItem);
                        });
                    } else {
                        // Если новостей нет
                        newsList.innerHTML = '<div class="no-news">Нет доступных новостей. Пожалуйста, попробуйте позже.</div>';
                    }
                })
                .catch(error => {
                    console.error('Ошибка при загрузке новостей:', error);
                    newsList.innerHTML = `
                        <div class="error-message">
                            Не удалось загрузить новости: ${error.message}
                        </div>
                    `;
                });
        });
    </script>
</body>
</html>
